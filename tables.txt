create table public.users (
  id uuid not null,
  name text not null,
  mail text not null,
  role text not null default 'public'::text,
  constraint users_pkey primary key (id),
  constraint users_mail_key unique (mail),
  constraint users_id_fkey foreign KEY (id) references auth.users (id) on delete CASCADE
) TABLESPACE pg_default;

RLS Policies: 
1. Anon users can insert(supabase template one)
2. User can only see their data(supabase template one)

create table public.requests (
  id uuid not null,
  mail text not null,
  phone_number text not null,
  theatre_name text not null,
  address text not null,
  city text not null,
  state text not null,
  total_screens integer not null,
  gst_number text not null,
  status text not null default 'pending'::text,
  constraint requests_pkey primary key (id),
  constraint requests_gst_number_key unique (gst_number),
  constraint requests_id_fkey foreign KEY (id) references users (id) on delete CASCADE,
  constraint requests_total_screens_check check ((total_screens > 0))
) TABLESPACE pg_default;

RLS Policies: 
1. Authenticated users can insert(supabase template one)
2. User can only see their data(supabase template one)

create table public.theatres (
  id uuid not null,
  theatre_name text not null,
  name text not null,
  mail text not null,
  phone_number text not null,
  total_screens integer not null,
  address text not null,
  city text not null,
  state text not null,
  gst_number text not null,
  constraint theatres_pkey primary key (id),
  constraint theatres_gst_number_key unique (gst_number),
  constraint theatres_id_fkey foreign KEY (id) references users (id) on delete CASCADE
) TABLESPACE pg_default;
RLS Policies: 
1. Authenticated users can insert(supabase template one)
2. User can only see their data(supabase template one)

create table public.screens (
  id serial not null,
  theatre_id uuid null,
  screen_number integer not null,
  total_rows integer not null,
  total_columns integer not null,
  constraint screens_pkey primary key (id),
  constraint screens_theatre_id_fkey foreign KEY (theatre_id) references theatres (id) on delete CASCADE
) TABLESPACE pg_default;
RLS Policies: 
1. Authenticated users can insert(supabase template one)
2. User can only see their data(supabase template one)
create table public.shows (
  id serial not null,
  theatre_id uuid not null,
  screen_id integer not null,
  movie_name text not null,
  language text null,
  show_date date not null,
  start_time time without time zone not null,
  end_time time without time zone not null,
  ticket_price numeric(10, 2) not null,
  available_seats integer null,
  created_at timestamp without time zone null default now(),
  constraint shows_pkey primary key (id),
  constraint shows_screen_id_fkey foreign KEY (screen_id) references screens (id) on delete CASCADE,
  constraint shows_theatre_id_fkey foreign KEY (theatre_id) references theatres (id) on delete CASCADE
) TABLESPACE pg_default;
NO RLS

